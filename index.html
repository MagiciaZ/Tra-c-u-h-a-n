<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<title>Tra cứu hóa đơn</title>

<style>
body {
    font-family: Arial, sans-serif;
    max-width: 600px;
    margin: 30px auto;
    padding: 20px;
    border: 1px solid #ddd;
    border-radius: 10px;
    background: #fafafa;
}
h1 {
    text-align: center;
    color: #0066cc;
}
.code {
    font-size: 20px;
    font-weight: bold;
    margin: 20px 0;
    text-align: center;
}
.info {
    margin-top: 20px;
    padding: 15px;
    background: #fff;
    border-radius: 8px;
    border: 1px solid #ccc;
}
.label {
    font-weight: bold;
}
</style>

</head>
<body>

<h1>Tra cứu hóa đơn nhà thuốc</h1>

<div id="content">
    Đang tải dữ liệu...
</div>

<script>
// Lấy mã hóa đơn từ URL: ?code=HD202511260312
const urlParams = new URLSearchParams(window.location.search);
const code = urlParams.get("code");

// Vị trí file JSON
const jsonUrl = `invoices/${code}.json`;

if (!code) {
    document.getElementById("content").innerHTML =
        "<p>Không tìm thấy mã hóa đơn.</p>";
} else {
    fetch(jsonUrl)
        .then(res => {
            if (!res.ok) throw new Error("Không tìm thấy hóa đơn");
            return res.json();
        })
        .then(data => {
            document.getElementById("content").innerHTML = `
                <p class="code">Mã hóa đơn: ${data.code}</p>
                <div class="info">
                    <p><span class="label">Ngày: </span> ${data.date}</p>
                    <p><span class="label">Giờ: </span> ${data.time}</p>
                    <p><span class="label">Khách hàng: </span> ${data.customer}</p>
                    <hr>
                    <p><span class="label">Tổng tiền: </span> ${data.total}</p>
                </div>
            `;
        })
        .catch(err => {
            document.getElementById("content").innerHTML =
                "<p>Không tìm thấy hóa đơn.</p>";
        });
}
</script>

</body>
</html>
